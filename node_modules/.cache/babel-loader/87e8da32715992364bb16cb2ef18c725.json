{"ast":null,"code":"var _jsxFileName = \"/Users/ignaciourrutiagajardo/Documents/Web/PlanningAdvisors/pa-app/src/index.js\";\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Table from 'react-bootstrap/Table';\nimport 'bootstrap/dist/css/bootstrap.min.css'; // import BootstrapTable from './MyTable'\n\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport BootstrapTable from 'react-bootstrap-table-next';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nclass StockTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.prevColumns = [];\n    this.state = {\n      columns: ['date'],\n      stock_name: ['BTC_USD'],\n      data: {}\n    };\n  }\n\n  getStockData() {\n    const active_columns = this.props.active_columns;\n    const stock_name = this.props.active_stock;\n    fetch(`http://localhost:3001/get/${stock_name}/${active_columns}`).then(response => {\n      return response.json();\n    }).then(fetched_data => {\n      this.setState({\n        data: fetched_data\n      });\n    });\n  }\n\n  render() {\n    if (this.props.active_columns !== this.prevColumns || this.props.active_stock !== this.prevStock) {\n      this.getStockData();\n      this.prevColumns = this.props.active_columns;\n      this.prevStock = this.props.active_stock;\n    }\n\n    const isDataEmpty = Object.keys(this.state.data).length === 0;\n\n    if (!isDataEmpty) {\n      // return <BootstrapTable keyField='name' data = {this.state.data}/>\n      return /*#__PURE__*/_jsxDEV(JSONTable, {\n        data: this.state.data\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 46,\n        columnNumber: 14\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \" No hay datos disponibles \"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 49,\n        columnNumber: 14\n      }, this);\n    }\n  }\n\n}\n\nclass MultipleStockTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.prevColumns = [];\n    this.prevStockList = [];\n    this.state = {\n      columns: ['date'],\n      data: {}\n    };\n  }\n\n  componentDidMount() {\n    this.getStocksData();\n  }\n\n  componentDidUpdate() {\n    if (this.props.active_columns !== this.prevColumns || this.props.stocks_list !== this.prevStockList) {\n      this.getStocksData();\n      this.prevColumns = this.props.active_columns;\n      this.prevStockList = this.props.stocks_list;\n    }\n  }\n\n  async getStocksData() {\n    const active_columns = this.props.active_columns;\n    const stocks_list = this.props.stocks_list;\n    var stocksData = [];\n\n    if (active_columns.length === 0) {\n      for (let stock_name of stocks_list) {\n        var new_row = {};\n        new_row['name'] = stock_name;\n        stocksData.push(new_row);\n        this.setState({\n          data: stocksData\n        });\n      }\n\n      return;\n    }\n\n    for await (let stock_name of stocks_list) {\n      fetch(`http://localhost:3001/get/${stock_name}/${active_columns}`).then(response => {\n        return response.json();\n      }).then(fetched_data => {\n        var new_row = {\n          'name': fetched_data['stock_name']\n        };\n        Object.assign(new_row, fetched_data['data'][0]);\n        stocksData.push(new_row);\n\n        if (this.props.active_columns.includes('rsi_3d')) {\n          this.sortByColumn(stocksData, 'rsi_3d');\n        } else {\n          this.sortByColumn(stocksData, 'name');\n        }\n\n        this.setState({\n          data: stocksData\n        });\n      });\n    }\n  }\n\n  sortByColumn(data, column) {\n    let desc = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;\n    data.sort((a, b) => {\n      if (a[column] < b[column]) {\n        return -1;\n      }\n\n      ;\n\n      if (a[column] > b[column]) {\n        return 1;\n      }\n\n      ;\n      return 0;\n    });\n    if (desc) data.reverse();\n  }\n\n  render() {\n    const products = [{\n      'id': 145,\n      'name': 'caca',\n      'price': 1999\n    }, {\n      'id': 245,\n      'name': 'pipi',\n      'price': 9019\n    }, {\n      'id': 143,\n      'name': 'mocos',\n      'price': 4314\n    }, {\n      'id': 146,\n      'name': 'vomito',\n      'price': 533\n    }]; //     const columns = [{\n    //       dataField: 'id',\n    //       text: 'Product ID',\n    //       sort: true\n    //     }, {\n    //       dataField: 'name',\n    //       text: 'Product Name',\n    //       sort: true\n    //     }, {\n    //       dataField: 'price',\n    //       text: 'Product Price',\n    //       sort: true\n    //  }];\n\n    const columns = [{\n      dataField: 'name',\n      text: 'Nombre'\n    }];\n    console.log(this.state.data);\n    const isDataEmpty = Object.keys(this.state.data).length === 0;\n\n    if (!isDataEmpty) {\n      return /*#__PURE__*/_jsxDEV(BootstrapTable, {\n        keyField: \"name\",\n        data: this.state.data,\n        columns: columns\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 167,\n        columnNumber: 10\n      }, this);\n      return /*#__PURE__*/_jsxDEV(JSONTable, {\n        data: this.state.data,\n        headers: this.props.headers,\n        columnManage: this.props.columnManage\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 169,\n        columnNumber: 15\n      }, this);\n    } else {\n      return /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No hay datos disponibles\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 175,\n        columnNumber: 15\n      }, this);\n    }\n  }\n\n}\n\nclass AllocationPanel extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Allocation Panel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 183,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nclass PerformancePanel extends React.Component {\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"p\", {\n      children: \"Performance Panel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 189,\n      columnNumber: 12\n    }, this);\n  }\n\n}\n\nfunction JSONTable(props) {\n  // Usamos las keys como headers\n  let headers = Object.keys(props.data[0]);\n  let tableHeaders;\n\n  if (props.headers) {\n    tableHeaders = headers.map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n      children: [\" \", props.headers[header]]\n    }, header, true, {\n      fileName: _jsxFileName,\n      lineNumber: 200,\n      columnNumber: 5\n    }, this));\n  } else {\n    tableHeaders = headers.map(header => /*#__PURE__*/_jsxDEV(\"th\", {\n      children: [\" \", header]\n    }, header, true, {\n      fileName: _jsxFileName,\n      lineNumber: 204,\n      columnNumber: 5\n    }, this));\n  }\n\n  const tableHead = /*#__PURE__*/_jsxDEV(\"thead\", {\n    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: tableHeaders\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 206,\n      columnNumber: 28\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 206,\n    columnNumber: 21\n  }, this); // Colocar llaves como input\n\n\n  var keys = Object.keys(props.data[0]);\n  const listRows = []; // Iteramos sobre cada objeto que será una fila\n\n  let i = 1;\n\n  for (var obj of props.data) {\n    try {\n      let listData = [];\n      let j = 1; // Iteramos sobre cada elemento que será una celda\n\n      for (const k of keys) {\n        let value;\n\n        if (props.columnManage && props.columnManage[k]) {\n          let f = props.columnManage[k];\n          value = f(obj[k]);\n        } else {\n          value = obj[k];\n        }\n\n        listData.push( /*#__PURE__*/_jsxDEV(\"td\", {\n          children: [\" \", value, \" \"]\n        }, j, true, {\n          fileName: _jsxFileName,\n          lineNumber: 228,\n          columnNumber: 23\n        }, this));\n        j++;\n      } // console.log(listData);\n\n\n      var dataTR = /*#__PURE__*/_jsxDEV(\"tr\", {\n        children: listData\n      }, i, false, {\n        fileName: _jsxFileName,\n        lineNumber: 232,\n        columnNumber: 20\n      }, this); // var element = <tbody key={obj.id} > {dataTR} </tbody> \n\n\n      listRows.push(dataTR);\n      i++;\n    } catch (e) {\n      console.error(e);\n    }\n  }\n\n  var tableBody = /*#__PURE__*/_jsxDEV(\"tbody\", {\n    children: listRows\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 239,\n    columnNumber: 19\n  }, this); // const listRows = data.data.map((item) => \n  //   <li key = {item.id}>{  item.id}</li>)\n\n\n  return /*#__PURE__*/_jsxDEV(Table, {\n    striped: true,\n    bordered: true,\n    hover: true,\n    responsive: \"sm\",\n    children: [tableHead, tableBody]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 242,\n    columnNumber: 11\n  }, this);\n}\n\n_c = JSONTable;\n\nclass SingleStockData extends React.Component {\n  constructor(props) {\n    super(props); // Lista de columnas\n\n    this.columns = ['open', 'close', 'high', 'low', 'volume', 'adjclose', 'daily_return', 'percentage_return', 'rsi_3d', 'rsi_5d', 'rsi_14d', 'rsi_25d']; // Creamos diccionario columns con columnas vacías\n\n    this.state = {\n      active_columns: ['date'],\n      active_stock: 'BTC_USD'\n    };\n    this.handleColumnChange = this.handleColumnChange.bind(this);\n    this.handleTickrChange = this.handleTickrChange.bind(this);\n  }\n\n  handleColumnChange(column_dict) {\n    const active_columns_aux = ['date'];\n\n    for (var col of this.columns) {\n      if (column_dict[col]) {\n        active_columns_aux.push(col);\n      }\n    }\n\n    this.setState({\n      active_columns: active_columns_aux\n    });\n  }\n\n  handleTickrChange(stock_name) {\n    this.setState({\n      active_stock: stock_name\n    });\n    console.log(\"Nuevo stock: \" + stock_name);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panels\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-info\",\n        children: /*#__PURE__*/_jsxDEV(\"div\", {\n          children: [/*#__PURE__*/_jsxDEV(Checkbox, {\n            onColumnChange: this.handleColumnChange,\n            columns: this.columns\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 286,\n            columnNumber: 11\n          }, this), /*#__PURE__*/_jsxDEV(TextInput, {\n            onChange: this.handleTickrChange\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 291,\n            columnNumber: 11\n          }, this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 284,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 283,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-allocation\",\n        children: /*#__PURE__*/_jsxDEV(AllocationPanel, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 298,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 297,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-balance\",\n        children: /*#__PURE__*/_jsxDEV(PerformancePanel, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 301,\n          columnNumber: 11\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 300,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-positions\",\n        children: /*#__PURE__*/_jsxDEV(StockTable, {\n          active_columns: this.state.active_columns,\n          update_columns: true,\n          active_stock: this.state.active_stock\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 304,\n          columnNumber: 12\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 303,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 282,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass MultipleStockData extends React.Component {\n  constructor(props) {\n    super(props);\n    this.columns = ['date', 'open', 'close', 'high', 'low', 'volume', 'adjclose', 'daily_return', 'percentage_return', 'rsi_3d', 'rsi_5d', 'rsi_14d', 'rsi_25d'];\n    this.headers = {\n      'date': 'Fecha',\n      'name': 'Acción',\n      'open': 'Abrir',\n      'close': 'Cierre',\n      'high': 'Max',\n      'low': 'Min',\n      'volume': 'Volumen',\n      'adjclose': 'Cierre ajus.',\n      'daily_return': 'Rentabilidad por dia',\n      'percentage_return': 'Rentabilidad %',\n      'rsi_3d': 'RSI 3 días',\n      'rsi_5d': 'RSI 5 días',\n      'rsi_14d': 'RSI 14 días',\n      'rsi_25d': 'RSI 25 días'\n    };\n    this.columnManage = {\n      'name': name => {\n        return name.toUpperCase();\n      },\n      'date': dateString => {\n        let date = new Date(dateString);\n        return date.toLocaleDateString();\n      },\n      'open': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'close': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'high': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'low': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'volume': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'adjclose': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'daily_return': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'percentage_return': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'rsi_3d': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'rsi_5d': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'rsi_14d': n => {\n        return this.roundDecimals(n, 2);\n      },\n      'rsi_25d': n => {\n        return this.roundDecimals(n, 2);\n      }\n    };\n    this.state = {\n      stocks_list: [],\n      active_columns: []\n    };\n    this.handleColumnChange = this.handleColumnChange.bind(this);\n  }\n\n  roundDecimals(n, decimals) {\n    return Math.round(n * 10 ** decimals) / 10 ** decimals;\n  }\n\n  getStocksList() {\n    fetch(`http://localhost:3001/stocksList`).then(response => {\n      return response.json();\n    }).then(fetched_data => {\n      this.setState({\n        stocks_list: fetched_data\n      });\n    });\n  }\n\n  componentDidMount() {\n    this.getStocksList();\n  }\n\n  handleColumnChange(column_dict) {\n    const active_columns_aux = [];\n\n    for (var col of this.columns) {\n      if (column_dict[col]) {\n        active_columns_aux.push(col);\n      }\n    }\n\n    this.setState({\n      active_columns: active_columns_aux\n    });\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"panels\",\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-info\",\n        children: /*#__PURE__*/_jsxDEV(Checkbox, {\n          onColumnChange: this.handleColumnChange,\n          columns: this.columns,\n          optionLabels: this.headers\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 401,\n          columnNumber: 9\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 400,\n        columnNumber: 7\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        className: \"panel-positions\",\n        children: /*#__PURE__*/_jsxDEV(MultipleStockTable, {\n          active_columns: this.state.active_columns,\n          stocks_list: this.state.stocks_list,\n          headers: this.headers,\n          columnManage: this.columnManage\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 409,\n          columnNumber: 14\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 408,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 398,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.options = this.props.columns;\n    this.state = {\n      options: {}\n    };\n\n    if (this.props.optionLabels) {\n      this.optionLabels = this.props.optionLabels;\n    } else {\n      this.optionLabels = {};\n\n      for (let col of this.props.columns) {\n        this.optionLabels[col] = col;\n      }\n    }\n\n    for (var option of this.options) {\n      this.state.options[option] = false;\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.checked;\n    const name = target.name; // Creamos variable auxiliar que modificaremos y asignaremos al estado actual\n\n    var aux_options = this.state.options;\n    aux_options[name] = value;\n    this.props.onColumnChange(aux_options);\n  }\n\n  handleSubmit(event) {\n    alert('A name was submitted: ' + this.state.value);\n    event.preventDefault();\n  }\n\n  render() {\n    // const value = this.state.value;\n    const listBox = this.options.map(option => /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(\"label\", {\n        children: [/*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"checkbox\",\n          onChange: this.handleChange,\n          name: option\n        }, option, false, {\n          fileName: _jsxFileName,\n          lineNumber: 469,\n          columnNumber: 9\n        }, this), \" \", this.optionLabels[option]]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 468,\n        columnNumber: 7\n      }, this)\n    }, option, false, {\n      fileName: _jsxFileName,\n      lineNumber: 467,\n      columnNumber: 5\n    }, this));\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handlleSubmit,\n      children: listBox\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 477,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nclass TextInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      value: ''\n    };\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({\n      value: event.target.value\n    });\n  }\n\n  handleSubmit(event) {\n    const value = this.state.value;\n    event.preventDefault();\n    this.props.onChange(value);\n  }\n\n  render() {\n    return /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: this.handleSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"label\", {\n        children: [\"Stock name:\", /*#__PURE__*/_jsxDEV(\"input\", {\n          type: \"text\",\n          value: this.state.value,\n          onChange: this.handleChange\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 510,\n          columnNumber: 11\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 508,\n        columnNumber: 9\n      }, this), /*#__PURE__*/_jsxDEV(\"input\", {\n        type: \"submit\",\n        value: \"Calcular\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 512,\n        columnNumber: 9\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 507,\n      columnNumber: 7\n    }, this);\n  }\n\n}\n\nlet multiple_stock_data = true;\nlet stock_data;\nmultiple_stock_data ? stock_data = /*#__PURE__*/_jsxDEV(MultipleStockData, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 521,\n  columnNumber: 36\n}, this) : stock_data = /*#__PURE__*/_jsxDEV(SingleStockData, {}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 521,\n  columnNumber: 72\n}, this);\nReactDOM.render( /*#__PURE__*/_jsxDEV(React.StrictMode, {\n  children: stock_data\n}, void 0, false, {\n  fileName: _jsxFileName,\n  lineNumber: 524,\n  columnNumber: 3\n}, this), document.getElementById('root')); // If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\n/* \nTo-do:\n  - Ordenar código\n  - Ver formato (colores, numero de decimales, etc)\n  - Ordenar Datos\n  - Manejar funciones de subida de datos\n*/\n\nvar _c;\n\n$RefreshReg$(_c, \"JSONTable\");","map":{"version":3,"sources":["/Users/ignaciourrutiagajardo/Documents/Web/PlanningAdvisors/pa-app/src/index.js"],"names":["React","ReactDOM","Table","BootstrapTable","StockTable","Component","constructor","props","prevColumns","state","columns","stock_name","data","getStockData","active_columns","active_stock","fetch","then","response","json","fetched_data","setState","render","prevStock","isDataEmpty","Object","keys","length","MultipleStockTable","prevStockList","componentDidMount","getStocksData","componentDidUpdate","stocks_list","stocksData","new_row","push","assign","includes","sortByColumn","column","desc","sort","a","b","reverse","products","dataField","text","console","log","headers","columnManage","AllocationPanel","PerformancePanel","JSONTable","tableHeaders","map","header","tableHead","listRows","i","obj","listData","j","k","value","f","dataTR","e","error","tableBody","SingleStockData","handleColumnChange","bind","handleTickrChange","column_dict","active_columns_aux","col","MultipleStockData","name","toUpperCase","dateString","date","Date","toLocaleDateString","n","roundDecimals","decimals","Math","round","getStocksList","Checkbox","options","optionLabels","option","handleChange","handleSubmit","event","target","checked","aux_options","onColumnChange","alert","preventDefault","listBox","handlleSubmit","TextInput","onChange","multiple_stock_data","stock_data","document","getElementById"],"mappings":"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","sourcesContent":["import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport Table from 'react-bootstrap/Table'\nimport 'bootstrap/dist/css/bootstrap.min.css'\n// import BootstrapTable from './MyTable'\nimport 'react-bootstrap-table-next/dist/react-bootstrap-table2.min.css';\nimport BootstrapTable from 'react-bootstrap-table-next';\n\nclass StockTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.prevColumns = [];\n\n    this.state = {\n      columns: ['date'],\n      stock_name: ['BTC_USD'],\n      data: {}\n    }\n  }\n\n  getStockData() {\n    const active_columns = this.props.active_columns;\n    const stock_name = this.props.active_stock;\n    fetch(`http://localhost:3001/get/${stock_name}/${active_columns}`)\n    .then(response => {\n      return response.json();\n    })\n    .then(fetched_data => {\n      this.setState({\n        data: fetched_data\n      });\n    })\n  }\n\n  render(){\n   if (this.props.active_columns !== this.prevColumns || this.props.active_stock !== this.prevStock){\n     this.getStockData();\n     this.prevColumns = this.props.active_columns;\n     this.prevStock = this.props.active_stock;\n   }\n\n    const isDataEmpty = Object.keys(this.state.data).length === 0;\n    if (!isDataEmpty) { \n      // return <BootstrapTable keyField='name' data = {this.state.data}/>\n      return <JSONTable data={this.state.data}/>; \n    }\n    else{\n      return <div> No hay datos disponibles </div>\n    }\n  }\n}\n\nclass MultipleStockTable extends React.Component {\n  constructor(props) {\n    super(props);\n    this.prevColumns = [];\n    this.prevStockList = [];\n\n    this.state = {\n      columns: ['date'],\n      data: {}\n    }\n  }\n\ncomponentDidMount(){\n  this.getStocksData();\n}\n\ncomponentDidUpdate(){\n  if (this.props.active_columns !== this.prevColumns || this.props.stocks_list !== this.prevStockList){\n    this.getStocksData();\n    this.prevColumns = this.props.active_columns;\n    this.prevStockList = this.props.stocks_list;\n  }\n}\n\n async getStocksData() {\n    const active_columns = this.props.active_columns;\n    const stocks_list = this.props.stocks_list;\n    var stocksData = [];\n\n  if (active_columns.length === 0) {\n    for (let stock_name of stocks_list){\n      var new_row = {};\n      new_row['name'] = stock_name;\n\n      stocksData.push(new_row)\n\n      this.setState({data: stocksData});\n    }\n    return;\n  }\n\n    for await (let stock_name of stocks_list){\n      fetch(`http://localhost:3001/get/${stock_name}/${active_columns}`)\n      .then(response => {\n        return response.json();\n      })\n      .then(fetched_data => {\n        var new_row = {\n          'name': fetched_data['stock_name']\n        }\n        Object.assign(new_row, fetched_data['data'][0]);\n\n        stocksData.push(new_row)\n        \n        if (this.props.active_columns.includes('rsi_3d')){\n          this.sortByColumn(stocksData, 'rsi_3d')\n        }\n        else {\n          this.sortByColumn(stocksData, 'name');\n        }\n\n        this.setState({\n          data: stocksData\n        })\n      })\n    }\n\n  }\n\n  sortByColumn(data, column, desc=false){\n    data.sort( (a,b) => {\n      if (a[column] < b[column]) {return -1};\n      if (a[column] > b[column]) {return 1};\n      return 0;\n    } );\n\n    if (desc) data.reverse();\n  }\n\n  \n\n  render(){\n    const products = [\n      {'id': 145, 'name': 'caca', 'price': 1999}, \n      {'id': 245, 'name': 'pipi', 'price': 9019}, \n      {'id': 143, 'name': 'mocos', 'price': 4314}, \n      {'id': 146, 'name': 'vomito', 'price': 533}, \n     ];\n//     const columns = [{\n//       dataField: 'id',\n//       text: 'Product ID',\n//       sort: true\n//     }, {\n//       dataField: 'name',\n//       text: 'Product Name',\n//       sort: true\n//     }, {\n//       dataField: 'price',\n//       text: 'Product Price',\n//       sort: true\n//  }];\n\n  const columns = [\n    {dataField: 'name',\n  text: 'Nombre'}\n  ]\n\n    console.log(this.state.data);\n\n\n     const isDataEmpty = Object.keys(this.state.data).length === 0;\n     if (!isDataEmpty) { \n       return (\n         <BootstrapTable keyField='name' data={this.state.data} columns={columns}/>\n       );\n       return <JSONTable \n       data = {this.state.data}\n       headers = {this.props.headers}\n       columnManage = {this.props.columnManage}/>;\n     }\n     else{\n       return <div>No hay datos disponibles</div>\n     }\n   }\n\n}\n\nclass AllocationPanel extends React.Component {\n  render() {\n    return <p>Allocation Panel</p>\n  }\n}\n\nclass PerformancePanel extends React.Component {\n  render() {\n    return <p>Performance Panel</p>\n  }\n}\n\nfunction JSONTable(props) {\n  // Usamos las keys como headers\n  let headers = Object.keys(props.data[0]);\n  let tableHeaders;\n\n  if (props.headers) {\n    tableHeaders = headers.map((header) =>\n    <th key={header}> {props.headers[header]}</th> );\n  }\n  else {\n    tableHeaders = headers.map((header) =>\n    <th key={header}> {header}</th>);\n  }\n  const tableHead = <thead><tr>{tableHeaders}</tr></thead>;\n\n  // Colocar llaves como input\n  var keys = Object.keys(props.data[0]);\n  const listRows = [];\n\n  // Iteramos sobre cada objeto que será una fila\n  let i = 1;\n  for (var obj of props.data){\n    try {\n      let listData = [];\n      let j = 1;\n      // Iteramos sobre cada elemento que será una celda\n      for (const k of keys){\n        let value;\n        if (props.columnManage && props.columnManage[k]){\n          let f = props.columnManage[k];\n          value = f(obj[k]);\n        }\n        else {\n          value = obj[k];\n        }\n        listData.push(<td key={j}> {value} </td>);\n        j ++;\n      }\n      // console.log(listData);\n      var dataTR = <tr key={i}>{listData}</tr>\n      // var element = <tbody key={obj.id} > {dataTR} </tbody> \n      listRows.push(dataTR);\n      i++;\n    } catch (e) {console.error(e)}\n    }\n\n  var tableBody = <tbody>{listRows}</tbody>\n  // const listRows = data.data.map((item) => \n  //   <li key = {item.id}>{  item.id}</li>)\n  return (<Table striped bordered hover responsive=\"sm\">{tableHead}{tableBody}</Table>)  \n}\n\nclass SingleStockData extends React.Component {\n  constructor(props){\n    super(props);\n\n    // Lista de columnas\n    this.columns = ['open', 'close', 'high', 'low', 'volume', 'adjclose', 'daily_return', 'percentage_return', 'rsi_3d', 'rsi_5d', 'rsi_14d', 'rsi_25d'];\n    // Creamos diccionario columns con columnas vacías\n    this.state = {\n      active_columns: ['date'],\n      active_stock: 'BTC_USD'\n    };\n\n    this.handleColumnChange = this.handleColumnChange.bind(this);\n    this.handleTickrChange = this.handleTickrChange.bind(this);\n  }\n  \n  handleColumnChange(column_dict) {\n    const active_columns_aux = ['date']\n    for (var col of this.columns) {\n      if (column_dict[col]) {\n        active_columns_aux.push(col)\n      }\n    }\n    this.setState({\n      active_columns: active_columns_aux\n    });\n  }\n\n  handleTickrChange(stock_name) {\n    this.setState({\n      active_stock: stock_name\n    });\n    console.log(\"Nuevo stock: \" + stock_name);\n  }\n\n  render() {\n    return (\n      <div className=\"panels\">\n        <div className=\"panel-info\">\n          <div>\n\n          <Checkbox\n          onColumnChange = {this.handleColumnChange}\n          columns = {this.columns}\n          />\n\n          <TextInput\n          onChange = {this.handleTickrChange}\n          />\n\n          </div>\n        </div>\n        <div className=\"panel-allocation\">\n          <AllocationPanel />\n        </div>\n        <div className=\"panel-balance\">\n          <PerformancePanel/>\n        </div>\n        <div className=\"panel-positions\">\n          {<StockTable\n          active_columns = {this.state.active_columns} \n          update_columns = {true}\n          active_stock = {this.state.active_stock}\n          />}\n          \n     </div>   \n     </div>\n    )\n  }\n}\n\nclass MultipleStockData extends React.Component{\n  constructor(props){\n    super(props);\n    this.columns = ['date','open', 'close', 'high', 'low', 'volume', 'adjclose', 'daily_return', 'percentage_return', 'rsi_3d', 'rsi_5d', 'rsi_14d', 'rsi_25d'];\n    this.headers = {\n      'date': 'Fecha',\n      'name': 'Acción',\n      'open': 'Abrir',\n      'close': 'Cierre',\n      'high': 'Max',\n      'low': 'Min',\n      'volume': 'Volumen',\n      'adjclose': 'Cierre ajus.',\n      'daily_return': 'Rentabilidad por dia',\n      'percentage_return': 'Rentabilidad %',\n      'rsi_3d': 'RSI 3 días',\n      'rsi_5d': 'RSI 5 días',\n      'rsi_14d': 'RSI 14 días',\n      'rsi_25d': 'RSI 25 días',\n    }\n\n    this.columnManage = {\n      'name': (name) => {return name.toUpperCase();},\n      'date': (dateString) => {\n        let date = new Date(dateString);\n        return date.toLocaleDateString();\n      },\n      'open': (n) => {return this.roundDecimals(n,2)},\n      'close': (n) => {return this.roundDecimals(n,2)},\n      'high': (n) => {return this.roundDecimals(n,2)},\n      'low': (n) => {return this.roundDecimals(n,2)},\n      'volume': (n) => {return this.roundDecimals(n,2)},\n      'adjclose': (n) => {return this.roundDecimals(n,2)},\n      'daily_return': (n) => {return this.roundDecimals(n,2)},\n      'percentage_return': (n) => {return this.roundDecimals(n,2)},\n      'rsi_3d': (n) => {return this.roundDecimals(n,2)},\n      'rsi_5d': (n) => {return this.roundDecimals(n,2)},\n      'rsi_14d': (n) => {return this.roundDecimals(n,2)},\n      'rsi_25d': (n) => {return this.roundDecimals(n,2)},\n    }\n\n    this.state = {\n      stocks_list: [],\n      active_columns: []\n    }\n    this.handleColumnChange = this.handleColumnChange.bind(this);\n  }\n\n  roundDecimals(n, decimals) {\n    return(Math.round( n * (10**decimals)) / (10**decimals) )\n  }\n\n  getStocksList() {\n    fetch(`http://localhost:3001/stocksList`)\n    .then(response => {\n      return response.json();\n    })\n    .then(fetched_data => {\n      this.setState({\n        stocks_list: fetched_data\n      });\n    })\n  }\n\n  componentDidMount() {\n    this.getStocksList();\n  }\n \n  handleColumnChange(column_dict) {\n    const active_columns_aux = []\n    for (var col of this.columns) {\n      if (column_dict[col]) {\n        active_columns_aux.push(col)\n      }\n    }\n    this.setState({\n      active_columns: active_columns_aux\n    });\n  }\n\n  render () {\n    return (\n      <div className='panels'>\n\n      <div className='panel-info'>   \n        <Checkbox\n          onColumnChange = {this.handleColumnChange}\n          columns = {this.columns}\n          optionLabels = {this.headers}\n          />\n      </div>\n\n        <div className=\"panel-positions\">\n            {<MultipleStockTable\n            active_columns = {this.state.active_columns}\n            stocks_list = {this.state.stocks_list}\n            headers = {this.headers}\n            columnManage = {this.columnManage}\n            />}\n        </div>\n\n\n      </div>\n    )\n  }\n}\n\nclass Checkbox extends React.Component {\n  constructor(props) {\n    super(props);\n    this.options = this.props.columns;\n    this.state = {options: {}};\n    if (this.props.optionLabels) {\n      this.optionLabels = this.props.optionLabels;\n    }\n    else{\n      this.optionLabels = {};\n      for (let col of this.props.columns) {\n        this.optionLabels[col] = col;\n      }\n    }\n\n    for (var option of this.options){\n      this.state.options[option] = false;\n    }\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    const target = event.target;\n    const value = target.checked;\n    const name = target.name;\n\n    // Creamos variable auxiliar que modificaremos y asignaremos al estado actual\n    var aux_options = this.state.options;\n    aux_options[name] = value;\n\n    this.props.onColumnChange(aux_options);\n  }\n\n  handleSubmit(event) {\n    alert('A name was submitted: ' + \n    this.state.value);\n    event.preventDefault();\n  }\n\n  render() {\n    // const value = this.state.value;\n    const listBox = this.options.map((option) => \n    <div key={option}>\n      <label>\n        <input key={option} type=\"checkbox\" onChange={this.handleChange} name={option}/>\n        {\" \"}\n        {this.optionLabels[option]} \n      </label>\n    </div>\n    );\n\n    return (\n      <form onSubmit={this.handlleSubmit}>\n          {listBox}\n      </form>\n    );\n  }\n}\n\nclass TextInput extends React.Component {\n  constructor(props) {\n    super(props);\n    this.state = {value: ''}\n\n    this.handleChange = this.handleChange.bind(this);\n    this.handleSubmit = this.handleSubmit.bind(this);\n  }\n\n  handleChange(event) {\n    this.setState({value: event.target.value});\n  }\n\n  handleSubmit(event) {\n\n    const value = this.state.value;\n\n    event.preventDefault();\n    this.props.onChange(value);\n  }\n\n  render() {\n    return(\n      <form onSubmit={this.handleSubmit}>\n        <label>\n          Stock name:\n          <input type=\"text\" value={this.state.value} onChange={this.handleChange}/>\n        </label>\n        <input type=\"submit\" value=\"Calcular\" />\n      </form>\n    )\n  }\n\n}\n\nlet multiple_stock_data = true;\nlet stock_data;\nmultiple_stock_data ? stock_data = <MultipleStockData/> : stock_data = <SingleStockData/> ;\n\nReactDOM.render(\n  <React.StrictMode>\n    {stock_data}\n    {/* <BootstrapTable/> */}\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\n// reportWebVitals();\n\n/* \nTo-do:\n  - Ordenar código\n  - Ver formato (colores, numero de decimales, etc)\n  - Ordenar Datos\n  - Manejar funciones de subida de datos\n*/"]},"metadata":{},"sourceType":"module"}